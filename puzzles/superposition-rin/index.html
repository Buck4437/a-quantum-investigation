<!DOCTYPE html>
<html lang="en" dir="ltr">
    <head>
        <meta charset="utf-8">
        <title>Loading...</title>
        <link rel="stylesheet" href="./stylesheets/styles.css">
        <link rel="stylesheet" href="../../global/styles.css">
    </head>
    <body>
        <div id="app">
            <base-puzzle :title="title" class="puzzle">
                <template v-slot:flavour-text>
                    "I want to ask Rin out for a meal, but she always rejects me..."
                </template>

                <hr width="100%">

                <div class="intro">
                    <p>
                        We might be inclined to think that a measurement is like weighting an object. 
                        However, it is actually closer to asking a question.
                    </p>

                    <p>
                        The answer is like in a superposition state, 
                        the person might not even have an answer before you ask the question!
                        However, once you ask a question, you will get an answer after asking it.
                    </p>

                    <p>
                        Maybe, if you doing something before asking the question, you can alter the possibilities...
                    </p>

                    <p>
                        (This analogy is taken from the lecture notes.)
                    </p>
                </div>

                <hr width="100%">

                <div class="rules">
                    Rules:
                    <ul>
                        <li>The goal of this puzzle is to invite Rin for dinner.</li>
                        <li>You can perform two actions to alter the probability: Converse and Chatter</li>
                        <li>Converse increases the exponent by 7.</li>
                        <li>Chatter multiplies the exponent by 2.</li>
                        <li>A third action, Clack, will be unlocked later in the game. It subtracts the exponent by 13.</li>
                        <li>Your target is to reach a probability of 100% (10^2 %).</li>
                        <li>However, you will fail if the probability ever exceeds 100%.</li>
                        <li>You can reset at any time using Rephrase.</li>
                    </ul>
                </div>

                <hr width="100%">

                <div class="game">
                    <div v-if="loreText !== null" class="lore">
                        {{loreText}}
                    </div>
                    <div>
                        <button v-if="loreText !== null" @click="textId++" class="next">Next</button>
                    </div>
                    <div class="content" v-if="loreText === null && phase <= MAXPHASE">
                        <div class="left">
                            <div>Probability of acceptance: {{probability}}</div>
                            <span>{{actionText}}</span>
                        </div>
                        <div class="right">
                            <button v-for="move in filteredMoves" @click="playMove(move)" class="move-btn">{{move.name}}</button>
                            <button v-if="exponent == 2" class="move-btn" @click="ask">Ask for a meal</button>
                        </div>
                    </div>
                    <div v-if="loreText === null && phase > MAXPHASE">
                        Task completed!<br><br>
                        As a reference, you jotted down <span class="password">{{password}}</span> in your memo.<br><br>
                        <button @click="resetGame">Play Again</button>
                    </div>
                </div>
            </base-puzzle>
        </div>
    </body>
    <script src="../../libraries/vue.js"></script>

    <script src="../../global/BasePuzzle.js"></script>
    <script src="javascripts/index.js"></script>
</html>
